{"ast":null,"code":"var _jsxFileName = \"/Users/nat/nology/non-coursework/natsUniFullStack/client/src/components/NewStudent/NewStudent.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport { Container, Typography, Stack } from \"@mui/material\";\nimport { navigate } from \"@reach/router\";\nimport StudentForm from \"../StudentForm/StudentForm\";\nimport NotificationContext from \"../../context/NotificationProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NewStudent = () => {\n  _s();\n\n  const notificationContext = useContext(NotificationContext);\n  const initialValues = {\n    firstName: \"\",\n    lastName: \"\",\n    age: \"\",\n    email: \"\",\n    subjects: []\n  };\n\n  const handleSubmit = async values => {\n    try {\n      const res = await fetch(`http://localhost:4000/api/students/`, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(values)\n      });\n\n      if (!res.ok) {\n        throw res; // notificationContext.setSnack({\n        //   message: \"Sorry, there was an error! Please try again.\",\n        //   severity: \"warning\",\n        //   open: true,\n        // });\n      } else {\n        // notificationContext.setSnack({\n        //   message: \"Student created!\",\n        //   severity: \"success\",\n        //   open: true,\n        // });\n        navigate(`/`);\n      }\n    } catch (err) {\n      console.err(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"md\",\n      children: [/*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"column\",\n        spacing: 2,\n        sx: {\n          position: \"relative\",\n          top: \"100px\",\n          alignItems: \"center\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: \"New student\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StudentForm, {\n        initialValues: initialValues,\n        handleSubmit: handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(NewStudent, \"wegbkcSATQ6uaeeEERkkd2UzCMU=\");\n\n_c = NewStudent;\nexport default NewStudent;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewStudent\");","map":{"version":3,"sources":["/Users/nat/nology/non-coursework/natsUniFullStack/client/src/components/NewStudent/NewStudent.jsx"],"names":["React","useContext","Container","Typography","Stack","navigate","StudentForm","NotificationContext","NewStudent","notificationContext","initialValues","firstName","lastName","age","email","subjects","handleSubmit","values","res","fetch","method","headers","Accept","body","JSON","stringify","ok","err","console","position","top","alignItems"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,SAAT,EAAoBC,UAApB,EAAgCC,KAAhC,QAA6C,eAA7C;AACA,SAASC,QAAT,QAAyB,eAAzB;AAEA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,mBAAP,MAAgC,oCAAhC;;;;AAEA,MAAMC,UAAU,GAAG,MAAM;AAAA;;AACvB,QAAMC,mBAAmB,GAAGR,UAAU,CAACM,mBAAD,CAAtC;AAEA,QAAMG,aAAa,GAAG;AACpBC,IAAAA,SAAS,EAAE,EADS;AAEpBC,IAAAA,QAAQ,EAAE,EAFU;AAGpBC,IAAAA,GAAG,EAAE,EAHe;AAIpBC,IAAAA,KAAK,EAAE,EAJa;AAKpBC,IAAAA,QAAQ,EAAE;AALU,GAAtB;;AAQA,QAAMC,YAAY,GAAG,MAAOC,MAAP,IAAkB;AACrC,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,qCAAF,EAAwC;AAC7DC,QAAAA,MAAM,EAAE,MADqD;AAE7DC,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAE,kBADD;AAEP,0BAAgB;AAFT,SAFoD;AAM7DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,MAAf;AANuD,OAAxC,CAAvB;;AAQA,UAAI,CAACC,GAAG,CAACQ,EAAT,EAAa;AACX,cAAMR,GAAN,CADW,CAEX;AACA;AACA;AACA;AACA;AACD,OAPD,MAOO;AACL;AACA;AACA;AACA;AACA;AACAb,QAAAA,QAAQ,CAAE,GAAF,CAAR;AACD;AACF,KAxBD,CAwBE,OAAOsB,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACD,GAAR,CAAYA,GAAZ;AACD;AACF,GA5BD;;AA8BA,sBACE;AAAA,2BACE,QAAC,SAAD;AAAW,MAAA,QAAQ,EAAC,IAApB;AAAA,8BACE,QAAC,KAAD;AACE,QAAA,SAAS,EAAC,QADZ;AAEE,QAAA,OAAO,EAAE,CAFX;AAGE,QAAA,EAAE,EAAE;AAAEE,UAAAA,QAAQ,EAAE,UAAZ;AAAwBC,UAAAA,GAAG,EAAE,OAA7B;AAAsCC,UAAAA,UAAU,EAAE;AAAlD,SAHN;AAAA,+BAKE,QAAC,UAAD;AAAY,UAAA,OAAO,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,cADF,eAQE,QAAC,WAAD;AACE,QAAA,aAAa,EAAErB,aADjB;AAEE,QAAA,YAAY,EAAEM;AAFhB;AAAA;AAAA;AAAA;AAAA,cARF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AAiBD,CA1DD;;GAAMR,U;;KAAAA,U;AA4DN,eAAeA,UAAf","sourcesContent":["import React, { useContext } from \"react\";\nimport { Container, Typography, Stack } from \"@mui/material\";\nimport { navigate } from \"@reach/router\";\n\nimport StudentForm from \"../StudentForm/StudentForm\";\nimport NotificationContext from \"../../context/NotificationProvider\";\n\nconst NewStudent = () => {\n  const notificationContext = useContext(NotificationContext);\n\n  const initialValues = {\n    firstName: \"\",\n    lastName: \"\",\n    age: \"\",\n    email: \"\",\n    subjects: [],\n  };\n\n  const handleSubmit = async (values) => {\n    try {\n      const res = await fetch(`http://localhost:4000/api/students/`, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(values),\n      });\n      if (!res.ok) {\n        throw res;\n        // notificationContext.setSnack({\n        //   message: \"Sorry, there was an error! Please try again.\",\n        //   severity: \"warning\",\n        //   open: true,\n        // });\n      } else {\n        // notificationContext.setSnack({\n        //   message: \"Student created!\",\n        //   severity: \"success\",\n        //   open: true,\n        // });\n        navigate(`/`);\n      }\n    } catch (err) {\n      console.err(err);\n    }\n  };\n\n  return (\n    <>\n      <Container maxWidth=\"md\">\n        <Stack\n          direction=\"column\"\n          spacing={2}\n          sx={{ position: \"relative\", top: \"100px\", alignItems: \"center\" }}\n        >\n          <Typography variant=\"h5\">New student</Typography>\n        </Stack>\n        <StudentForm\n          initialValues={initialValues}\n          handleSubmit={handleSubmit}\n        />\n      </Container>\n    </>\n  );\n};\n\nexport default NewStudent;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/nat/nology/non-coursework/natsUniFullStack/client/src/components/StudentView/StudentView.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Container, Typography, Stack } from \"@mui/material\";\nimport { useMatch } from \"@reach/router\";\nimport Loader from \"react-loader-spinner\";\nimport { navigate } from \"@reach/router\";\nimport StudentForm from \"../StudentForm/StudentForm\";\nimport { NotificationContext } from \"../../context/NotificationProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst StudentView = () => {\n  _s();\n\n  const {\n    studentId\n  } = useMatch(\"/student/:studentId\");\n  const [student, setStudent] = useState(null);\n  const {\n    setSnack\n  } = useContext(NotificationContext);\n  useEffect(() => {\n    const fetchStudentData = async () => {\n      try {\n        const res = await fetch(`http://localhost:4000/api/students/${studentId}`);\n\n        if (!res.ok) {\n          throw res;\n        }\n\n        const data = await res.json();\n        const studentData = data.student;\n        setStudent(studentData);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    fetchStudentData();\n  }, [studentId]);\n\n  const handleSubmit = async values => {\n    try {\n      const res = await fetch(`http://localhost:4000/api/students/${studentId}`, {\n        method: \"PATCH\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(values)\n      });\n\n      if (!res.ok) {\n        setSnack({\n          // handle backend errors\n          message: \"Sorry, there was an error! Please try again.\",\n          severity: \"error\",\n          open: true\n        });\n        throw res;\n      } else {\n        setSnack({\n          message: \"Student updated!\",\n          severity: \"success\",\n          open: true\n        });\n        navigate(`/`);\n      }\n    } catch (err) {\n      setSnack({\n        message: \"Sorry, there was an error! Please try again.\",\n        severity: \"error\",\n        open: true\n      });\n      console.error(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: student ? /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"md\",\n      children: [/*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"column\",\n        spacing: 2,\n        sx: {\n          position: \"relative\",\n          top: \"100px\",\n          alignItems: \"center\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: \"Student view\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(StudentForm, {\n        initialValues: student,\n        handleSubmit: handleSubmit,\n        isExistingStudent: true,\n        studentId: studentId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"md\",\n      children: /*#__PURE__*/_jsxDEV(Stack, {\n        sx: {\n          position: \"relative\",\n          top: \"100px\",\n          alignItems: \"center\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Loader, {\n          type: \"Puff\",\n          color: \"#00BFFF\",\n          height: 100,\n          width: 100,\n          alignItems: \"center\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(StudentView, \"UQxWPv+wKu4qiOjfuVQYNdDXJe0=\", false, function () {\n  return [useMatch];\n});\n\n_c = StudentView;\nexport default StudentView;\n\nvar _c;\n\n$RefreshReg$(_c, \"StudentView\");","map":{"version":3,"sources":["/Users/nat/nology/non-coursework/natsUniFullStack/client/src/components/StudentView/StudentView.jsx"],"names":["React","useEffect","useState","Container","Typography","Stack","useMatch","Loader","navigate","StudentForm","NotificationContext","StudentView","studentId","student","setStudent","setSnack","useContext","fetchStudentData","res","fetch","ok","data","json","studentData","err","console","error","handleSubmit","values","method","headers","Accept","body","JSON","stringify","message","severity","open","position","top","alignItems"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Container, Typography, Stack } from \"@mui/material\";\nimport { useMatch } from \"@reach/router\";\nimport Loader from \"react-loader-spinner\";\nimport { navigate } from \"@reach/router\";\n\nimport StudentForm from \"../StudentForm/StudentForm\";\nimport { NotificationContext } from \"../../context/NotificationProvider\";\n\nconst StudentView = () => {\n  const { studentId } = useMatch(\"/student/:studentId\");\n  const [student, setStudent] = useState(null);\n  const { setSnack } = useContext(NotificationContext);\n\n  useEffect(() => {\n    const fetchStudentData = async () => {\n      try {\n        const res = await fetch(\n          `http://localhost:4000/api/students/${studentId}`\n        );\n        if (!res.ok) {\n          throw res;\n        }\n        const data = await res.json();\n        const studentData = data.student;\n        setStudent(studentData);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchStudentData();\n  }, [studentId]);\n\n  const handleSubmit = async (values) => {\n    try {\n      const res = await fetch(\n        `http://localhost:4000/api/students/${studentId}`,\n        {\n          method: \"PATCH\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(values),\n        }\n      );\n      if (!res.ok) {\n        setSnack({\n          // handle backend errors\n          message: \"Sorry, there was an error! Please try again.\",\n          severity: \"error\",\n          open: true,\n        });\n        throw res;\n      } else {\n        setSnack({\n          message: \"Student updated!\",\n          severity: \"success\",\n          open: true,\n        });\n        navigate(`/`);\n      }\n    } catch (err) {\n      setSnack({\n        message: \"Sorry, there was an error! Please try again.\",\n        severity: \"error\",\n        open: true,\n      });\n      console.error(err);\n    }\n  };\n\n  return (\n    <>\n      {student ? (\n        <Container maxWidth=\"md\">\n          <Stack\n            direction=\"column\"\n            spacing={2}\n            sx={{ position: \"relative\", top: \"100px\", alignItems: \"center\" }}\n          >\n            <Typography variant=\"h5\">Student view</Typography>\n          </Stack>\n          <StudentForm\n            initialValues={student}\n            handleSubmit={handleSubmit}\n            isExistingStudent={true}\n            studentId={studentId}\n          />\n        </Container>\n      ) : (\n        <Container maxWidth=\"md\">\n          <Stack\n            sx={{ position: \"relative\", top: \"100px\", alignItems: \"center\" }}\n          >\n            <Loader\n              type=\"Puff\"\n              color=\"#00BFFF\"\n              height={100}\n              width={100}\n              alignItems=\"center\"\n            />\n          </Stack>\n        </Container>\n      )}\n    </>\n  );\n};\n\nexport default StudentView;\n"]},"metadata":{},"sourceType":"module"}